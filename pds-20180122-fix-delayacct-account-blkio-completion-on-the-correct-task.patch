
Fix for mainline c96f5471ce7 ("delayacct: Account blkio completion on the correct task")
which is part of 4.14.15.

Signed-off-by: Holger Hoffst√§tte <holger@applied-asynchrony.com>

--- linux-4.14.14/kernel/sched/pds.c	2018-01-22 12:36:53.000000000 +0100
+++ linux-4.14.15/kernel/sched/pds.c	2018-01-22 12:46:35.422581265 +0100
@@ -2134,7 +2134,7 @@ static int try_to_wake_up(struct task_st
 	p->state = TASK_WAKING;
 
 	if (p->in_iowait) {
-		delayacct_blkio_end();
+		delayacct_blkio_end(p);
 		atomic_dec(&task_rq(p)->nr_iowait);
 	}
 
@@ -2148,7 +2148,7 @@ static int try_to_wake_up(struct task_st
 #else /* CONFIG_SMP */
 
 	if (p->in_iowait) {
-		delayacct_blkio_end();
+		delayacct_blkio_end(p);
 		atomic_dec(&task_rq(p)->nr_iowait);
 	}
 	prq = cpu_rq(cpu);
@@ -2205,7 +2205,7 @@ static void try_to_wake_up_local(struct
 
 	if (!task_queued(p)) {
 		if (p->in_iowait) {
-			delayacct_blkio_end();
+			delayacct_blkio_end(p);
 			atomic_dec(&task_rq(p)->nr_iowait);
 		}
 
